<!DOCTYPE html>
<html>
    <head>
        <title>Inscription</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous">
        </script>
    </head>
    <body>
        <form method="POST">
            <div>
                <h2>Identité</h2>
                <label for="firstName">Prénom:</label>
                <input type="text" id="firstName" name="firstName">
                <label for="lastName">Nom:</label>
                <input type="text" id="lastName" name="lastName">
                <label for="birthdate">Date de naissance:</label>
                <input type="text" id="birthdate" name="birthdate">
                <label for="honorific">Civilité:</label>
                <input type="text" id="honorific" name="honorific">
            </div>
            <div>
                <h2>Coordonnées</h2>
                <label for="address">Adresse postale:</label>
                <input type="text" id="address" name="address">
                <label for="tel">Téléphone:</label>
                <input type="text" id="tel" name="tel">
                <label for="email">Email:</label>
                <input type="text" id="email" name="email">
            </div>
            <input id="submit" type="submit" name="submit" value="Confirmer !">
        </form>
        <p>Lorsque vous aurez confirmé votre inscription, nous vous enverrons un mail contenant votre code client. Gardez-le précieusement !</p>
        
        <script type="application/javascript">
            $('document').ready(() => {

                console.log('document is ready');
                $('form').on('submit', function(event) {
                    event.preventDefault();
                    console.log('form submitted');   
                    console.log($(this).serialize());                
                    $.ajax({
                        url: './ActionServlet',//$(this).attr('action'),
                        type: $(this).attr('method'),
                        dataType: 'json',
                        data: 'todo=register&'+$(this).serialize(),
                        success: (resp) => {
                            console.log('request success');
                            console.log(resp);
                        },
                        error: function(xhr, resp, text) {
                            console.log('request failure');
                            console.log(xhr, resp, text);
                        },
                    });
                    return false;
                });
            });
        </script>  

    </body>
</html>
