<!DOCTYPE html>
<html>
    <head>
        <title>Inscription</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js"></script>
    </head>
    <body style="background: linear-gradient(to right, #fafafa, #fefefe)">
        <div class="ui padded centered grid">
            <div class="nine wide computer twelve wide tablet column">
                <div class="ui horizontal divider">S'inscrire</div>
                <form method="POST" action="./ActionServlet" class="ui form">
                    <h4 class="ui dividing header" style="text-align: center">Identité</h4>
                    <div class="two fields">
                        <div class="field">
                            <label for="firstName">Prénom</label>
                            <input type="text" id="firstName" name="firstName">
                        </div>
                        <div class="field">
                            <label for="lastName">Nom</label>
                            <input type="text" id="lastName" name="lastName">
                        </div>
                    </div>
                    <div class="two fields">
                        <div class="field">
                            <label for="birthdate">Date de naissance</label>
                            <div class="ui icon input">
                                <input type="date" id="birthdate" name="birthdate">
                                <i class="calendar icon"></i>
                            </div>    
                        </div>
                        <div class="field">
                            <label for="honorific">Civilité</label>
                            <input type="text" id="honorific" name="honorific">
                        </div>
                    </div>   
                    <h4 class="ui dividing header" style="text-align: center">Coordonnées</h4>
                    <div class="field">
                        <label for="address">Adresse postale</label>
                        <input type="text" id="address" name="address">
                    </div>
                    <div class="field">
                        <label for="tel">Téléphone</label>
                        <div class="ui icon input">
                            <input type="text" id="tel" name="tel">
                            <i class="phone icon"></i>
                        </div>
                    </div>
                    <div class="field">
                        <label for="email">Email</label>
                        <div class="ui icon input">
                            <input type="text" id="email" name="email">
                            <i class="mail icon"></i>
                        </div>
                    </div>   
                    <input type="hidden" name="todo" value="registerClient" />
                    <div style="display: flex; justify-content: flex-end">
                        <input class="ui green button" id="submit" type="submit" name="submit" value="Confirmer !">
                    </div>
                </form>    
                <div class="ui info message" style="text-align: center">Lorsque vous aurez confirmé votre inscription, nous vous enverrons un mail contenant votre code client. Gardez-le précieusement !</div>        
            </div>   
        </div>
        <script type="application/javascript">
            $('document').ready(() => {

                console.log('document is ready');
                $('form').on('submit', function(event) {
                    event.preventDefault();
                    console.log('form submitted');   
                    console.log($(this).serialize());                
                    $.ajax({
                        url: $(this).attr('action'),
                        type: $(this).attr('method'),
                        dataType: 'json',
                        data: $(this).serialize(),
                        success: (resp) => {
                            console.log('request success');
                            console.log(resp);
                        },
                        error: function(xhr, resp, text) {
                            console.log('error');
                            console.log(xhr, resp, text);
                            document.open();
                            document.write(xhr.responseText);
                            document.close();
                        },
                    });
                    return false;
                });
            });
        </script>  
    </body>
</html>
